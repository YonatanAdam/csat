<Window x:Class="csat.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="csat"
        Height="650"
        Width="1000"
        FontFamily="Segoe UI"
        Background="#1E1E1E"
        Closing="MainWindow_OnClosing">
        <Window.Resources>

                <!-- Colors -->
                <SolidColorBrush x:Key="BgBrush"
                                 Color="#1E1E1E"/>
                <SolidColorBrush x:Key="PanelBrush"
                                 Color="#252526"/>
                <SolidColorBrush x:Key="BorderBrush"
                                 Color="#3C3C3C"/>
                <SolidColorBrush x:Key="TextBrush"
                                 Color="#FFFFFF"/>
                <SolidColorBrush x:Key="AccentBrush"
                                 Color="#0078D4"/>

                <!-- TextBox style -->
                <Style TargetType="TextBox">
                        <Setter Property="Background"
                                Value="#2D2D30"/>
                        <Setter Property="Foreground"
                                Value="{StaticResource TextBrush}"/>
                        <Setter Property="BorderBrush"
                                Value="{StaticResource BorderBrush}"/>
                        <Setter Property="BorderThickness"
                                Value="1"/>
                        <Setter Property="Padding"
                                Value="8"/>
                        <Setter Property="CaretBrush"
                                Value="White"/>
                        <Setter Property="FontSize"
                                Value="16"/>
                </Style>

                <!-- Button style -->
                <Style TargetType="Button">
                        <Setter Property="Background"
                                Value="{StaticResource AccentBrush}"/>
                        <Setter Property="Foreground"
                                Value="White"/>
                        <Setter Property="BorderThickness"
                                Value="0"/>
                        <Setter Property="Padding"
                                Value="12,6"/>
                        <Setter Property="FontSize"
                                Value="14"/>
                        <Setter Property="Cursor"
                                Value="Hand"/>
                        <Setter Property="Template">
                                <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                        CornerRadius="2">
                                                        <ContentPresenter
                                                                HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"/>
                                                </Border>
                                        </ControlTemplate>
                                </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                                <Trigger Property="IsMouseOver"
                                         Value="True">
                                        <Setter Property="Background"
                                                Value="#2899F5"/>
                                </Trigger>
                                <Trigger Property="IsPressed"
                                         Value="True">
                                        <Setter Property="Background"
                                                Value="#0063B1"/>
                                </Trigger>
                        </Style.Triggers>
                </Style>

                <!-- Chat bubble -->
                <Style x:Key="ChatBubble"
                       TargetType="Border">
                        <Setter Property="CornerRadius"
                                Value="4"/>
                        <Setter Property="Padding"
                                Value="8,2"/>
                        <Setter Property="Margin"
                                Value="6,1"/>
                </Style>

        </Window.Resources>

        <Grid>
                <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Chat history -->
                <ListView Grid.Row="0"
                          Name="ChatHistory"
                          Background="{StaticResource BgBrush}"
                          BorderThickness="0"
                          Foreground="{StaticResource TextBrush}"
                          ScrollViewer.VerticalScrollBarVisibility="Auto">

                        <!-- Disable selection / highlight -->
                        <ListView.ItemContainerStyle>
                                <Style TargetType="ListViewItem">
                                        <Setter Property="Focusable"
                                                Value="False"/>
                                        <Setter Property="IsTabStop"
                                                Value="False"/>
                                        <Setter Property="Background"
                                                Value="Transparent"/>
                                        <Setter Property="BorderThickness"
                                                Value="0"/>
                                        <Setter Property="Padding"
                                                Value="0"/>
                                        <Setter Property="HorizontalContentAlignment"
                                                Value="Stretch"/>

                                        <!-- Kill all visual states -->
                                        <Setter Property="Template">
                                                <Setter.Value>
                                                        <ControlTemplate TargetType="ListViewItem">
                                                                <ContentPresenter/>
                                                        </ControlTemplate>
                                                </Setter.Value>
                                        </Setter>
                                </Style>
                        </ListView.ItemContainerStyle>

                        <ListView.ItemTemplate>
                                <DataTemplate>
                                        <Border Style="{StaticResource ChatBubble}" Margin="5">
                                                <StackPanel Orientation="Vertical">
                                                        <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding Username}" FontSize="15" FontWeight="Bold" Foreground="{StaticResource AccentBrush}"/>
                                                                <TextBlock Text="{Binding Timestamp, StringFormat='HH:mm'}" Margin="10,0,0,0" Foreground="Gray" FontSize="15" VerticalAlignment="Center"/>
                                                        </StackPanel>
                                                        <TextBox IsReadOnly="True" BorderThickness="0" Text="{Binding Text}" FontSize="18" TextWrapping="Wrap" Margin="0,2,0,0"/>
                                                </StackPanel>
                                        </Border>
                                </DataTemplate>
                        </ListView.ItemTemplate>

                </ListView>

                <!-- Input area -->
                <Border Grid.Row="1"
                        Background="{StaticResource PanelBrush}"
                        BorderThickness="1,0,0,0"
                        BorderBrush="{StaticResource BorderBrush}"
                        Padding="6">

                        <Grid>
                                <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <Ellipse x:Name="ConnectionLight" ToolTip="Connection Status"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Center"
                                         Width="15"
                                         Height="15"
                                         Fill="Red"
                                         Margin="0,0, 5,0"/>


                                <TextBox Grid.Column="1"
                                         x:Name="TextPrompt"
                                         Height="40"
                                         VerticalContentAlignment="Center"
                                         PreviewKeyDown="TextPrompt_OnPreviewKeyDown"/>

                                <Button Grid.Column="2"
                                        Content="Send"
                                        Margin="6,0,0,0"
                                        Height="40"
                                        MinWidth="80"
                                        Click="SendButton_OnClick"
                                        IsDefault="True"/>
                        </Grid>
                </Border>

        </Grid>
</Window>
